<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>A-frame UI Explorations</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.misc.min.js"></script>sphere-collider
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.controls.min.js"></script>movement-controls -->
    <script src="components/simple-navmesh-constraint.js"></script><!-- From Ada Rose Cannon -->
    <script src="components/aframe-html.js" ></script>
    <script src="components/aframe-teleport-controls.js"></script><!-- Using local copy because linked version does not work - weird -->
    <script src="https://unpkg.com/super-hands@^3.0.3/dist/super-hands.min.js"></script><!-- To grab things - uses sphere-collider from extras -->
    <script src="components/aframe-slice9-component.js" ></script>
    <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>
    <!-- James' Components -->
    <script src="components/code.js"></script>
    <script src="components/aframe-ui.js"></script>

</head>
<body>
    <div style="position:absolute; z-index: 100;">
        <div id="text" style="color:white; font-size: 1.25em; text-align:center;">Now it's ...Grab 1.0.3</div>
    </div>
   <a-scene scenemgr background="color:#55bbff;">

        <a-asset>
            <a-mixin id="bob" animation__pos="property:position; to:0 1.05 0; dir:alternate; loop:true; dur:1000; easing:easeInOutQuad; autoplay: false;"></a-mixin>
            <image id="frame" src="assets/ui/tooltip2.png"></image>
            <image id="skyDome" src="assets/images/skymap.png"
            <audio id="heartbeat" src="assets/audio/DalekHeartBeat.ogg" loop="true" volume="0.5"></audio>
        </a-asset>

        <!-- ******************************************** -->
        <!-- *       Basic VR scene for testing         * -->
        <!-- ******************************************** -->
        <!-- hover & drag-drop won't have any obvious effect -->
        <!-- without some additional event handlers or components.-->
        <!-- See the examples page for more -->

        
        <a-box id="box" class="grabbable clickable navhole" grabbingtest hoverable grabbable stretchable draggable droppable position="-3 0.5 -3" color="#2f80d1"  shadow="cast:true; receive:false"></a-box>
        
        <a-entity position="0 1 -2" scale="0.25 0.25 0.25">
            <a-sphere 
                id="smallBall" 
                class="grabbable clickable" 
                mixin="bob" 
                grabbingtest animstart grabbable hoverable 
                color="purple"  
                shadow visible="true">
            </a-sphere>
        </a-entity>

        <a-sphere id="largeBall" class="grabbable" hoverable grabbable stretchable draggable droppable position="3 0.5 -3" radius="0.5" color="orange" shadow="cast:true; receive:false"></a-sphere>

        <a-cone id="cone" class="grabbable" grabbable position="-3 0.75 3" radius-bottom="0.5" color="yellow" shadow="cast:true; receive:false"></a-cone>

        <a-cylinder id="tube" class="grabbable collide" grabbable position="3 0.5 3" radius="0.5" color="red" shadow="cast:true; receive:false"></a-cylinder>

        <a-box id="wall" class="grabbable" rotation="0 0 0" position="0 2.5 -4" height="5" width="5" depth="0.25" color="#00b95c" shadow="cast:false; receive:true"></a-box>
        
        <a-entity geometry="primitive:box;" position="-2 0.5 -2" material="shader:gif;src:url(assets/images/banana.gif);color:green;opacity:.8"></a-entity>

        <!-- planes don't appear to accept "clicks" from controllers for teleporting -->
        <!-- replaced floor plane with a box -->
        <a-box id="floor" class="nav-mesh" width="10" depth="10" height="0.1" position="0 -0.05 0" color="#177b0a" shadow="cast:false; receive:true;"></a-box>

        <a-sky id="sky" src="#skyDome"></a-sky>

        <!-- UI Experiments and Explorations -->
        <a-entity id="aframe UI" aframe-ui="size:0.8 0.6; padding:0.15; uiTexture:#frame; opacity:0.75; debug:false;" position="0 1.6 -1"></a-entity>
        <!-- <a-entity slice9="width: 2; height: 1; left: 20; right: 43; top: 20; bottom: 43; src:assets/ui/tooltip2.png; debug:true;" position="0.5 1.6 -1" ></a-entity> -->

        <!-- I think mine will work better so I'll write it up as a component -->
        <a-entity id="mySlice9" scale="0.15 0.15" position="0 1.65 -1.5">
            <!-- Panel Corners -->
            <!-- top left -->
            <a-plane 
                position="-0.55 0.55 0" 
                rotation="0 0 0"
                width="0.5" height="0.5" scale="1 1"
                material="src:#frame; transparent:true; offset:0 0.6666; repeat:0.3333 0.3333;" >
            </a-plane>
            <!-- top right -->
            <a-plane 
                position="0.5 0.5 0" 
                rotation="0 0 0"
                width="0.5" height="0.5" scale="1 1"
                material="src:#frame; transparent:true; offset:0.6666 0.6666; repeat:0.3333 0.3333;" >
            </a-plane>
            <!-- bottom left -->
            <a-plane 
                position="-0.5 -0.5 0" 
                rotation="0 0 0"
                width="0.5" height="0.5" scale="1 1" 
                material="src:#frame; transparent:true; offset: 0 0; repeat:0.3333 0.3333;" >
            </a-plane>
            <!-- bottom right -->
            <a-plane 
                position="0.5 -0.5 0" 
                rotation="0 0 0"
                width="0.5" height="0.5" scale="1 1"
                material="src:#frame; transparent:true; offset: 0.6666 1.0; repeat:0.3333 0.3333;" >
            </a-plane>
            <!-- Panel middle bits -->
            <!-- left -->
            <a-plane 
                position="-0.5 0 0" 
                rotation="0 0 0"
                width="0.5" height="0.5" scale="1 1"
                material="src:#frame; transparent:true; offset: 0 0.3333; repeat:0.3333 0.3333;" >
            </a-plane>
            <!-- top -->
            <a-plane 
                position="0 0.5 0" 
                rotation="0 0 0"
                width="0.5" height="0.5" scale="1 1" 
                material="src:#frame; transparent:true; offset: 0.3333 0.6666; repeat:0.3333 0.3333;" >
            </a-plane>
            <!-- right -->
            <a-plane 
                position="0.5 0 0" 
                rotation="0 0 0"
                width="0.5" height="0.5" scale="1 1" 
                material="src:#frame; transparent:true; offset: 0.6666 0.3333; repeat:0.3333 0.3333;" >
            </a-plane>
            <!-- bottom -->
            <a-plane 
                position="0 -0.5 0" 
                rotation="0 0 0"
                width="0.5" height="0.5" scale="1 1" 
                material="src:#frame; transparent:true; offset: 0.3333 0.0; repeat:0.3333 0.3333;" >
            </a-plane>
            <!-- middle bit -->
            <a-plane 
                position="0 0 0" 
                rotation="0 0 0"
                width="0.5" height="0.5" scale="1 1"
                material="src:#frame; transparent:true; offset: 0.3333 0.3333; repeat:0.3333 0.3333;" >
            </a-plane>
        </a-entity>



        <!-- ******************************************** -->
        <!-- *  Camera, Feedback Text and Controllers   * -->
        <!-- ******************************************** -->
        <a-entity id="cameraRig" position="0 0 0" movement-controls="enabled: true; speed:0.1; fly:false;">
            <a-entity 
                id="camera" 
                camera 
                position="0 1.65 0" 
                simple-navmesh-constraint="navmesh: .nav-mesh; height:1.65; exclude: .navhole;" 
                look-controls="pointerLockEnabled:true;" >
                    <!-- Cursor -->
                    <a-cursor 
                        id="cursor"
                        pointer 
                        raycaster="objects: .clickable; far: 0.5; enabled:true;"
                        position="0 0 -0.5"
                        color="#ffffff"
                        visible="true">
                    </a-cursor><!-- Cursor End -->
                    <!-- Text Field -->
                    <a-text id="feedback" value="Hello World" position="0 -0.1 -0.5" align="center" baseline="top" scale="0.15 0.15 0.15"></a-text><!-- Text Field End -->
            </a-entity>
            
            <!-- Left hand laser control -->
            <!-- console log to id controller type at line 73060 -->
            <a-entity id="leftHand"
                hand-controls="hand: left;"
                super-hands   
                sphere-collider="objects: .grabbable" 
                controllisten
                laser-controls="hand:left;" raycaster="far:0.5; objects: .clickable; enabled: false;"
                >
            </a-entity>
            <!-- End of Left Hand -->

            <!-- Right hand teleport control -->
            <a-entity id="rightHand"
                hand-controls="hand: right;"
                super-hands
                sphere-collider="objects: .grabbable"
                controllisten
                laser-controls="hand:right;" raycaster="far:0.5; objects: .clickable; enabled: false;"
                teleport-controls="cameraRig: #cameraRig; teleportOrigin: #camera; collisionEntities: #box, #tube, #floor;"
                >
            </a-entity>
            <!-- End of Right Hand -->

            </a-entity><!-- End Camera -->

            <!-- <a-entity hand-tracking-controls="hand: left"></a-entity>
             <a-entity hand-tracking-controls="hand: right"></a-entity> -->

            <!-- laser-controls raycaster="far:0.5; objects: .clickable;" -->
            <!-- the hand-controls does not work - appears broken:--> 
            <!-- trigger = grip, trigger+sidebutton= point+thumb up, trigger+touchpad = point + thumb down -->

            <!-- the laser-controls work as indicated above and are activated (seen) 
            when they raycaster intersects an object that is (currently) within 0.5 meters -->
        </a-entity> <!--End of cameraRig-->
       
   </a-scene>
</body>
</html>

<!-- below are specific settings which we'll currently ignore -->
<!-- teleport-controls="type: parabolic; collisionEntities: #ground" -->
<!-- hand-controls="hand:left; handModelStyle:toon; color:#c568ff;" -->
<!-- hand-controls="hand:right; handModelStyle:lowPoly; color:#c568ff;" laser-controls raycaster="far:3; objects: .clickable;" -->