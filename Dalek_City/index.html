<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dalek City</title>
    <link rel="stylesheet" href="css/styling.css">
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="lib/aframe-extras.min.js"></script>
    <script src="js/code.js" ></script>
</head>
<body>
    <header>
         <div id="preloader" class="center">
               <img src="assets/SVG/preloaderAnimatedSVG.svg">
         </div>

        <div id="begin" class="center">
            <div id="buttonBox">
                <a onclick="hidePlay()"><button id="button">Click Here to Begin<br>Dalek City Experience</button></a>
            </div>
        </div>
    </header>
    
   <a-scene id="MainScene" shadow="type:pcfsoft">
<!--###################################################################################-->
<!--########################       Asset Loading        ###############################-->
<!--###################################################################################-->
      <a-assets timeout="3000">
            <a-asset-item id="room" src="assets/models/SkaroSet.glb"></a-asset-item>
            <a-asset-item id="navmesh" src="assets/models/navMesh.glb"></a-asset-item>
            <audio id="corridorSFX" src="assets/audio/DalekCityCorridor_loop.wav" poolSize="2" preload="auto"></audio>
      </a-assets>

<!--###################################################################################-->
<!--########################        Camera Rig          ###############################-->
<!--###################################################################################-->      
       <a-entity id="rig"
          movement-controls="constrainToNavMesh: true; controls: checkpoint, gamepad, trackpad, keyboard, touch; speed: 0.075;"
          position=".25 0 3.75"
          rotation="0 5 0">
          <a-entity id="camera" camera="fov:50;" position="0 1.6 0" look-controls="pointerLockEnabled: true" ></a-entity>
          <a-sound id="dalekSound" src="#corridorSFX" autoplay="false" volume="0" loop="true" ></a-sound>
       </a-entity>
       
<!--###################################################################################-->
<!--########################           Models           ###############################-->
<!--###################################################################################-->        
       <!-- Skaro Hub Set -->
       <a-gltf-model id="scene" src="#room" shadow="cast:true;"></a-gltf-model>
       
       <!-- Nav mesh. -->
        <a-entity id="navigationMesh" nav-mesh
                normal-material
                visible="false"
                gltf-model="#navmesh">
        </a-entity>
        
        <!-- placeholder box -->
        <a-box position=" 0 1 -2" ></a-box>
       
<!--###################################################################################-->
<!--########################        Lights              ###############################-->
<!--###################################################################################-->
<!-- Spotlight with Shadow -->
       <a-light type="spot" intensity="1" target="#lightTarget" position="0 4 1" light="castShadow:true; shadowCameraVisible:false; shadowCameraLeft:-6.5; shadowMapHeight:1024; shadowMapWidth:1024; penumbra:0.5;"></a-light>
<!-- Spotlight target -->
       <a-box id="lightTarget" scale="0.1 0.1 0.1" position="0 0 0.75" visible="false"></a-box>
<!-- Fill lights -->   
       <a-light type="spot" distance="15" rotation="-90 0 0" position="-2 6 -1" light="penumbra:0.5;" intensity="2" angle="45"></a-light>
       <a-light type="spot" distance="15" rotation="-90 0 0" position="2 6 -1" light="penumbra:0.5;" intensity="2" angle="45"></a-light>
       <a-light type="spot" distance="15" rotation="-90 0 0" position="2 6 3.25" light="penumbra:0.5;" intensity="2" angle="45"></a-light>
       <a-light type="spot" distance="15" rotation="-90 0 0" position="-2 6 3.75" light="penumbra:0.5;" intensity="2" angle="45"></a-light>
   </a-scene>
</body>
</html>


