<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HMD Animated Gltf</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="libs/aframe-teleport-controls.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script  src="JS/code.js"></script>
</head>
<body>
    <div style="position:absolute; z-index: 100;">
        <div id="text" style="color:white; font-size: 1.25em; text-align:center;">Now it's ...1.3.0</div>
    </div>
    <a-scene id="scene" scenemgr background="color:#000000;">
        <a-asset>
            <a-asset-item id="player1" src="assets/SK_Character_Business_Man_01_Anim.glb"></a-asset-item>
            <a-asset-item id="player2" src="assets/SK_Character_Business_Man_01.glb"></a-asset-item>
            <a-asset-item id="player3" src="assets/standinCharacter.glb"></a-asset-item>
            <a-mixin id="shadowCastRec" shadow="cast:true; receive:true" ></a-mixin>
            <a-mixin id="shadowCast" shadow="cast:true; receive:false" ></a-mixin>
            <a-mixin id="shadowRec" shadow="cast:false; receive:true" ></a-mixin>
            <a-cubemap id="pisa">
                <img src="https://threejs.org/examples/textures/cube/pisa/px.png">
                <img src="https://threejs.org/examples/textures/cube/pisa/nx.png">
                <img src="https://threejs.org/examples/textures/cube/pisa/py.png">
                <img src="https://threejs.org/examples/textures/cube/pisa/ny.png">
                <img src="https://threejs.org/examples/textures/cube/pisa/pz.png">
                <img src="https://threejs.org/examples/textures/cube/pisa/nz.png">
            </a-cubemap>
        </a-asset>


        <!-- Basic VR scene for testing -->
        <a-box id="box" position="-3 0.5 -3" color="#2f80d1" mixin="shadowCastRec" ></a-box>
        <a-sphere position="3 0.5 -3" radius="0.5" color="orange" mixin="shadowCastRec" ></a-sphere>
        <a-cone position="-3 0.5 3" radius-bottom="0.5" color="yellow" mixin="shadowCastRec" ></a-cone>
        <a-cylinder id="tube" position="3 0.5 3" radius="0.5" color="red" mixin="shadowCastRec" ></a-cylinder>
        
        <!-- planes don't appear to accept "clicks" from controllers for teleporting -->
        <a-plane id="wall" rotation="0 0 0" position="0 2.5 -4" height="5" width="5" color="#00b95c" mixin="shadowRec" ></a-plane>
        
        <!-- replaced floor plane with a box -->
        <a-box id="floor" width="10" depth="10" height="0.1" position="0 -0.05 0" color="#177b0a" mixin="shadowRec"></a-box>

<!-- Adding GLTF Character to Scene -->
        <a-gltf-model 
            id="Player1"
            gltf-model="#player1"
            animation-mixer="clip: Idle; crossFadeDuration:0.5;" 
            position="1 0 -2"
            mixin="shadowCast"
            rotation="0 -45 0"
            mesh-data
            >
        </a-gltf-model>
        <a-gltf-model 
            id="Player2"
            gltf-model="#player2"
            animation-mixer="clip: Idle; crossFadeDuration:0.5;" 
            position="-1 0 -2"
            mixin="shadowCast"
            rotation="0 45 0"
            mesh-data
            >
        </a-gltf-model>
        <a-gltf-model 
            id="Player3"
            gltf-model="#player3"
            animation-mixer="clip: Idle; crossFadeDuration:0.5;" 
            position="0 0 -2"
            mixin="shadowCast"
            rotation="0 -90 0"
            mesh-data
            >
        </a-gltf-model> 
      
       <a-entity id="cameraRig" position="0 0 0">
           <a-entity id="camera" camera="fov:80; near:0.005" position="0 1.65 0" wasd-controls look-controls ></a-entity>
           
           <!-- Left hand laser control -->
           <!-- console log to id controller type at line 73060 -->
           <a-entity id="leftHand" controllisten
              hand-controls="hand: left;" windows-motion-controls="hand: left">
               
           </a-entity>

           <!-- Right hand teleport control -->
           <a-entity id="rightHand" controllisten
              teleport-controls="cameraRig: #cameraRig; teleportOrigin: #camera; collisionEntities: #box, #tube, #wall, #floor;"
              hand-controls="hand: right;" windows-motion-controls="hand:right;">
               
           </a-entity>

           <!-- the hand-controls works as advertized: 
           trigger = grip, trigger+sidebutton= point+thumb up, trigger+touchpad = point + thumb down -->

           <!-- the laser-controls work as indicated above and are activated (seen) 
           when they raycaster intersects an object that is (currently) within 3 meters -->
       </a-entity>
       <a-light type="directional" light="castShadow: true; shadowCameraVisible: false" position="-3 2.5 1.5"></a-light>
       <a-light type="probe" envMap="#pisa" ></a-light>
       
   </a-scene>
</body>
</html>

<!-- below are specific settings which we'll currently ignore -->
<!-- teleport-controls="type: parabolic; collisionEntities: #ground" -->
<!-- hand-controls="hand:left; handModelStyle:toon; color:#c568ff;" -->
<!-- hand-controls="hand:right; handModelStyle:lowPoly; color:#c568ff;" laser-controls raycaster="far:3; objects: .clickable;" -->