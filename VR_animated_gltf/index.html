<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HMD Animated Gltf</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="libs/aframe-teleport-controls.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script  src="JS/code.js"></script>
</head>
<body>
    <div style="position:absolute; z-index: 100;">
        <div id="text" style="color:white; font-size: 1.25em; text-align:center;">Now it's ...1.3.0</div>
    </div>
    <a-scene scenemgr id="scene" background="color:#55ddff;" renderer="colorManagement:false;">
        <a-asset>
            <a-asset-item id="Western" src="assets/Western_Characters.glb" ></a-asset-item>
            <a-asset-item id="SyFy" src="assets/SciFiCity_Characters.glb" ></a-asset-item>
            <a-asset-item id="Adventure" src="assets/Adventure_Characters.glb" ></a-asset-item>
            <img id="Black" src="assets/textures/Characters_Black.png">
            <img id="Brown" src="assets/textures/Characters_Brown.png">
            <img id="White" src="assets/textures/Characters_White.png">
            <img id="Western01" src="assets/textures/PolygonWestern_Texture_01_A.png">
            <img id="Western02" src="assets/textures/PolygonWestern_Texture_01_B.png">
            <img id="Western03" src="assets/textures/PolygonWestern_Texture_01_C.png">
            <img id="Western04" src="assets/textures/PolygonWestern_Texture_04_A.png">
            <a-mixin id="shadowCastRec" shadow="cast:true; receive:true" ></a-mixin>
            <a-mixin id="shadowCast" shadow="cast:true; receive:false" ></a-mixin>
            <a-mixin id="shadowRec" shadow="cast:false; receive:true" ></a-mixin>
            <a-cubemap id="pisa">
                <img src="https://threejs.org/examples/textures/cube/pisa/px.png">
                <img src="https://threejs.org/examples/textures/cube/pisa/nx.png">
                <img src="https://threejs.org/examples/textures/cube/pisa/py.png">
                <img src="https://threejs.org/examples/textures/cube/pisa/ny.png">
                <img src="https://threejs.org/examples/textures/cube/pisa/pz.png">
                <img src="https://threejs.org/examples/textures/cube/pisa/nz.png">
            </a-cubemap>
        </a-asset>

<!-- *************************************** -->
<!--        Basic VR scene for testing       -->
<!-- *************************************** -->
        <a-box id="box" position="-3 0.5 -3" color="#2f80d1" mixin="shadowCastRec" ></a-box>
        <a-sphere position="3 0.5 -3" radius="0.5" color="orange" mixin="shadowCastRec" ></a-sphere>
        <a-cone position="-3 0.5 3" radius-bottom="0.5" color="yellow" mixin="shadowCastRec" ></a-cone>
        <a-cylinder id="tube" position="3 0.5 3" radius="0.5" color="red" mixin="shadowCastRec" ></a-cylinder>
        <a-plane id="wall" rotation="0 0 0" position="0 2.5 -4" height="5" width="5" color="#00b95c" mixin="shadowRec" ></a-plane>

        <!-- planes don't appear to accept "clicks" from controllers for teleporting -->
        <!-- replaced floor plane with a box -->
        <a-box id="floor" width="10" depth="10" height="0.1" position="0 -0.05 0" color="#888888" mixin="shadowRec"></a-box>

<!-- *************************************** -->
<!--    Adding GLTF Characters to Scene      -->
<!-- *************************************** -->
        <a-gltf-model id="Player1" gltf-model="#Adventure" animation-mixer="clip: Idle01; crossFadeDuration: 0.5" position="1.22189 0 -2.56252" mixin="shadowCast" rotation="0 -2.995996310739075 0" character-setup="modelSkin: Peasant; modelTexture: #White;">
        </a-gltf-model>

        <a-gltf-model id="Player2" gltf-model="#SyFy" animation-mixer="clip: Talking02; startFrame:2000;" position="3.00117 0 -0.88109" mixin="shadowCast" rotation="0 -57.85555927892514 0" character-setup="modelSkin: Alien_Male_02">
        </a-gltf-model>

        <a-gltf-model id="Player3" gltf-model="#SyFy" animation-mixer="clip: Idle01; crossFadeDuration: 0.5" position="2.13738 0 -1.75692" mixin="shadowCast" rotation="0 -70.51391584675041 0" character-setup="modelSkin: Cyber_Female_01">
        </a-gltf-model>

        <a-gltf-model id="Player4" gltf-model="#Western" animation-mixer="clip: Walking01; crossFadeDuration: 0.5" position="-2.12495 0 -1.87901" mixin="shadowCast" rotation="0 35.496454281739894 0" character-setup="modelSkin: Sheriff_01; modelTexture: #Western01">
        </a-gltf-model>

        <a-gltf-model id="Player5" gltf-model="#Western" animation-mixer="clip: Idle02; crossFadeDuration:0.5;" position="0 0 -3" mixin="shadowCast" rotation="0 0 0" character-setup="modelSkin:Business_Man_01; modelTexture: #Western04">
        </a-gltf-model>

        <a-gltf-model id="Player6" gltf-model="#Western" animation-mixer="clip: WalkingFemale01; crossFadeDuration: 0.5; timeScale: 1.0" position="-3.0036 0 -1.22004" mixin="shadowCast" rotation="0 41.73539171291942 0" character-setup="modelSkin: WorkingGirl_01; modelTexture: #Western04">
        </a-gltf-model>

        <a-gltf-model id="Player7" gltf-model="#Western" animation-mixer="clip: WalkMenace; crossFadeDuration: 0.5" position="-1.09155 0 -2.5019" mixin="shadowCast" rotation="0 36.318075759957495 0" character-setup="modelSkin: Gunman_01; modelTexture: #Western01">
        </a-gltf-model>

        <a-gltf-model id="Player8" gltf-model="#Western" animation-mixer="clip: Running01; crossFadeDuration: 0.5; timeScale: 0.5" position="3.50882 0 0.16175" mixin="shadowCast" rotation="0 -86.83461864105192 0" character-setup="modelSkin: Cowgirl_01; modelTexture: #Western03">
        </a-gltf-model>

        <a-gltf-model id="Player9" gltf-model="#Adventure" animation-mixer="clip: Talking02; crossFadeDuration: 0.5; timeScale: 2.0; startFrame:1500;" position="1 0 -1.5" mixin="shadowCast" rotation="0 -30 0" character-setup="modelSkin: Nude; modelItem: SwordSheath; modelTexture: #Brown">
        </a-gltf-model>

<!-- *************************************** -->
<!--        Camera Rig & Camera              -->
<!-- *************************************** -->
        <a-entity id="cameraRig" position="0 0 0" movement-controls="speed: 0.15;">
            <a-entity id="camera" camera="fov:80; near:0.005" position="0 1.65 0" look-controls="pointerLockEnabled:true;" ></a-entity>
            <!-- Left hand laser control -->
            <!-- console log to id controller type at line 73060 -->
            <a-entity id="leftHand" controllisten
                hand-controls="hand: left;" windows-motion-controls="hand: left">
                
            </a-entity>

            <!-- Right hand teleport control -->
            <a-entity id="rightHand" controllisten
                teleport-controls="cameraRig: #cameraRig; teleportOrigin: #camera; collisionEntities: #box, #tube, #wall, #floor;"
                hand-controls="hand: right;" windows-motion-controls="hand:right;">
                
            </a-entity>

            <!-- the hand-controls no longer work as advertized: 
            trigger = grip, trigger+sidebutton= point+thumb up, trigger+touchpad = point + thumb down -->

            <!-- the laser-controls work as indicated above and are activated (seen) 
            when they raycaster intersects an object that is (currently) within 3 meters -->
        </a-entity>

<!-- *************************************** -->
<!--                Lighting                 -->
<!-- *************************************** -->
        <a-light type="directional" light="castShadow: true; shadowCameraVisible: false" position="-3 2.5 1.5"></a-light>
        <a-light type="probe" envMap="#pisa" ></a-light>
       
   </a-scene>
</body>
</html>

<!-- below are specific settings which we'll currently ignore -->
<!-- teleport-controls="type: parabolic; collisionEntities: #ground" -->
<!-- hand-controls="hand:left; handModelStyle:toon; color:#c568ff;" -->
<!-- hand-controls="hand:right; handModelStyle:lowPoly; color:#c568ff;" laser-controls raycaster="far:3; objects: .clickable;" -->